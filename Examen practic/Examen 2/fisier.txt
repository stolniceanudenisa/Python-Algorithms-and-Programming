class CarteFileRepo:
    def __init__(self, filename):
        self.__filename = filename
        self.__storage = {}

    def read_file(self):
        lista = []
        with open(self.__filename, "r") as f:
            lines = f.readlines()
            self.__storage.clear()
            for line in lines:
                line = line.strip()
                if line != "":
                    parts = line.split(',')
                    idc = parts[0]
                    titl = parts[1]
                    nrpag = parts[2]
                    gen = parts[3]
                    carte = Carte(idc, titl, int(nrpag),gen)
                    self.__storage[idc] = carte
                    lista.append(carte)
        return lista

    def write_file(self):
        with open(self.__filename, "w") as f:
            carti = self.__storage
            for key in carti:
                idc = carti[key].id_carte
                titlu = carti[key].titlu
                nrpagini = carti[key].nrpagini
                genc = carti[key].gen
                f.write(str(idc) + ',' + titlu + ',' + str(nrpagini) + ',' + genc + '\n')

 



def save_to_file(self, lista):
        """
        Salveaza in fisier lista lista, stergand tot ce era acolo initial.
        :param and type lista: lista ce trebuie salvata,list
        """
        with open(self.__filename, "w") as f:
            for el in lista:
                string = str(el.id_carte) + ',' + el.titlu + ',' + str(el.nrpagini) + ',' + el.gen + '\n'
                f.write(string)




